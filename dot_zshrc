# History
HISTFILE="$HOME/.zsh_history"
HISTSIZE=100000
SAVEHIST=100000

setopt HIST_IGNORE_SPACE
setopt HIST_IGNORE_DUPS
setopt SHARE_HISTORY

# Prompt

PURE_GIT_PULL=0

if [[ "$OSTYPE" == darwin* ]]; then
  fpath+=("$(brew --prefix)/share/zsh/site-functions")
else
  fpath+=($HOME/.zsh/pure)
fi

autoload -U promptinit; promptinit

prompt pure

# Vi mode

bindkey -v
export KEYTIMEOUT=1  # make switching between modes faster

# Environment Variables

## Preferred editor for local and remote sessions
if [[ -n $SSH_CONNECTION ]]; then
  export EDITOR='vim'
else
  export EDITOR='nvim'
fi

## Local language

export LANG="en_US.UTF-8"

# Mise

if command -v mise > /dev/null ; then
  eval "$($HOME/.local/bin/mise activate zsh)"
fi

# Completion

autoload -Uz compinit && compinit

if command -v fzf > /dev/null ; then
  source <(fzf --zsh)
fi

## flux completion
command -v flux >/dev/null && . <(flux completion zsh)

## Kubectl completion
command -v kubectl >/dev/null && . <(kubectl completion zsh)
#
## helm completion
command -v helm >/dev/null && . <(helm completion zsh)

## mise completion
command -v mise >/dev/null && . <(mise completion zsh)

# Aliases
source $HOME/.config/zsh/aliases.zsh
